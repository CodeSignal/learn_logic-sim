<nav class="toc">
  <strong>Contents</strong>
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#getting-started">Getting Started</a></li>
    <li><a href="#features">Key Features</a></li>
    <li><a href="#workflow">Workflow</a></li>
    <li><a href="#shortcuts">Shortcuts</a></li>
    <li><a href="#faq">Troubleshooting / FAQ</a></li>
  </ul>
</nav>

<section id="overview">
  <h2>Overview</h2>
  <p>Logic Circuit Lab is a drag-and-drop simulator for experimenting with logic gates without leaving the page. Build small combinational circuits, observe live signal flow, and share the resulting designs instantly.</p>
</section>

<section id="getting-started">
  <h2>Getting Started</h2>
  <ol>
    <li>Open the <strong>Circuit Elements</strong> palette and drag a gate onto the canvas, or click a tile to drop it in the center.</li>
    <li>Place <strong>Input</strong> and <strong>Output</strong> blocks to provide circuit endpoints.</li>
    <li>Connect components by clicking an output port and then an input port. The wire will follow the connection automatically.</li>
    <li>Pan the workspace by dragging on empty grid space; use the trackpad or mouse wheel to zoom (150% by default).</li>
    <li>Click an <strong>Input</strong> block (or use the <em>Toggle value</em> button in the Selection panel) to drive the circuit high (1) or low (0).</li>
  </ol>
</section>

<section id="features">
  <h2>Key Features</h2>

  <h3>Gate Palette</h3>
  <p>The palette includes the most common two-input gates plus buffer and inverter blocks. Each gate uses the standard symbol stored in <code>client/gates</code>.</p>

  <h3>Interactive Canvas</h3>
  <p>Drag gates to reposition them, wire connections visually, and highlight signal flow. Active signals tint their gate symbols and wire segments with the accent color.</p>

  <h3>Automatic Persistence</h3>
  <p>Your canvas is saved to local storage after every change. Watch the status bar for messages such as “Saving…” and “Changes saved”.</p>

  <h3>Configurable Palette</h3>
  <p>Control which gates appear in the Circuit Elements panel and set the default zoom level by editing <code>client/gate-config.json</code>. Reload the app to apply the updated palette.</p>

  <h3>Programmatic VHDL Export</h3>
  <p>External tools can dispatch the <code>logic-sim:export-vhdl</code> event or post the same message type to trigger an export. The current circuit is written to <code>user.vhdl</code>.</p>
</section>

<section id="workflow">
  <h2>Workflow</h2>
  <ol>
    <li><strong>Plan</strong>: Sketch the circuit using the palette preview to decide which gates you need.</li>
    <li><strong>Place</strong>: Drag the required gates to the canvas and arrange them to match your plan.</li>
    <li><strong>Wire</strong>: Click an output hub, then click a target input to route a connection. Repeat for each signal path. Click an occupied input hub to remove its wire.</li>
    <li><strong>Verify</strong>: Step through each combination by clicking your input blocks (or pressing <em>Toggle value</em> in the Selection panel). The panel summarizes every gate’s inputs, outputs, and position.</li>
  </ol>

  <h3>Tips &amp; Best Practices</h3>
  <ul>
    <li>Use the <em>Reset</em> button to restore the starter template. The new state is written to <code>user.vhdl</code> immediately.</li>
    <li>Press <kbd>Delete</kbd> with a gate selected to remove it without touching the mouse.</li>
    <li>Need to flip an input often? Click the block directly or reuse the <em>Toggle value</em> button to cycle through cases.</li>
    <li>Name your Input and Output blocks from the right-click menu to keep larger designs organized.</li>
    <li>Right-click any gate to rename it or trigger its quick actions.</li>
    <li>Keep related gates close together so the auto-routed Bézier wires stay readable.</li>
  </ul>
</section>

<section id="shortcuts">
  <h2>Shortcuts</h2>
  <ul>
    <li><strong>ESC</strong> – Cancel a pending wire connection.</li>
    <li><strong>Delete</strong> – Remove the currently selected gate.</li>
    <li><strong>Click + Drag</strong> – Move a gate by grabbing the gate symbol.</li>
    <li><strong>Drag empty grid</strong> – Pan the workspace.</li>
    <li><strong>Scroll / Pinch</strong> – Zoom in or out around the cursor.</li>
    <li><strong>Click output, click input</strong> – Create a wire between two components.</li>
    <li><strong>Click input hub</strong> – Remove the attached wire.</li>
    <li><strong>Right-click gate</strong> – Open the contextual editor for naming and quick actions.</li>
    <li><strong>Click input block / Selection panel → Toggle value</strong> – Switch an input block between logic 0 and 1.</li>
</ul>
</section>

<section id="faq">
  <h2>Troubleshooting / FAQ</h2>

  <details>
    <summary>Why do I see “Save failed (will retry)”? </summary>
    <p>This means the browser refused to write to local storage (usually because it is full or blocked). The app will retry automatically; freeing space in local storage normally resolves the issue.</p>
  </details>

  <details>
    <summary>How do I delete a wire?</summary>
    <p>Attach the source output to a different input to reroute it, or connect a new output to the input to replace the existing wire. Each input accepts one connection at a time.</p>
  </details>

  <details>
    <summary>The wires look misaligned after resizing the window.</summary>
    <p>The wire layer recalculates its layout whenever the window size changes. If you still notice misalignment, move any gate slightly to trigger a full redraw.</p>
  </details>

  <details>
    <summary>Is my work automatically saved?</summary>
    <p>Yes. After every change the status bar progresses through “Saving…” and “Changes saved”, followed by “Ready”.</p>
  </details>
</section>
